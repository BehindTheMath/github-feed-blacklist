{"version":3,"sources":["scripts/contentscript.js"],"names":["feedSize","loadNextPage","button","document","querySelector","click","countUpdate","count","getElementById","textContent","getElementsByClassName","length","feedCleaning","lines","querySelectorAll","Array","prototype","forEach","call","line","classes","classList","repoLine","text","repo","anchor","indexOf","slice","chrome","runtime","sendMessage","response","parentNode","contains","star","add","remove","fork","issue_open","issue_com","issue_close","wiki","commit","observer","MutationObserver","onMessage","addListener","request","update","observe","childList","hideCount","createElement","id","insertTarget","parentElement","insertBefore","addEventListener","hiddenElt","elt"],"mappings":"AAAA,YAEA,IAAIA,UAAW,GAEXC,aAAe,WACjB,GAAIC,GAASC,SAASC,cAAc,wBACpC,OAAIF,IACFA,EAAOG,SACA,IAEF,GAGLC,YAAc,WAChB,GAAIC,GAAQJ,SAASK,eAAe,YACpCD,GAAME,YAAcN,SAASO,uBAAuB,aAAaC,QAG/DC,aAAe,WACjB,GAAIC,GAAQV,SAASW,iBAAiB,iBACtCC,OAAMC,UAAUC,QAAQC,KAAKL,EAAO,SAAUM,GAC5C,GAAIC,GAAUD,EAAKE,UACfC,EAAWH,EAAKL,iBAAiB,cAAc,GAAGS,KAClDC,EAAOF,EACPG,EAASH,EAASI,QAAQ,IACf,MAAXD,IACFD,EAAOF,EAASK,MAAM,EAAGF,IAG3BG,OAAOC,QAAQC,aAAcN,KAAMA,GAAQ,SAAUO,GAC/CZ,EAAKa,aAEHZ,EAAQa,SAAS,mBACG,SAAlBF,EAASG,KACXf,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,UACG,SAAlBF,EAASM,KACXlB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,mBACS,SAAxBF,EAASO,WACXnB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,oBACQ,SAAvBF,EAASQ,UACXpB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,mBACU,SAAzBF,EAASS,YACXrB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,YACG,SAAlBF,EAASU,KACXtB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,cAGtBhB,EAAQa,SAAS,UACK,SAApBF,EAASW,OACXvB,EAAKE,UAAUc,IAAI,aAEnBhB,EAAKE,UAAUe,OAAO,mBAMhC9B,eAGEqC,SAAW,GAAIC,kBAAiB,WAClChC,eACIT,SAASW,iBAAiB,kCAAkCH,OAASX,UACvEC,gBAIJ2B,QAAOC,QAAQgB,UAAUC,YAAY,SAAUC,GACzCA,EAAQC,QACVpC,iBAIJ+B,SAASM,QAAQ9C,SAASC,cAAc,UAAY8C,WAAW,GAE/D,IAAIC,WAAYhD,SAASiD,cAAc,QACvCD,WAAU9B,UAAUc,IAAI,gBACxBgB,UAAUE,GAAK,YACfF,UAAU1C,YAAc,CACxB,IAAI6C,cAAenD,SAASC,cAAc,eAC1CkD,cAAaC,cAAcC,aAAaL,UAAWG,cAEnDnD,SAASK,eAAe,aAAaiD,iBAAiB,QAAS,WAC7D,GAAIC,GAAYvD,SAASO,uBAAuB,YAC5CgD,GAAU/C,QAAU+C,EAAU,GAAGrC,UAAUY,SAAS,aACtDlB,MAAMC,UAAUC,QAAQC,KAAKwC,EAAW,SAAUC,GAChDA,EAAItC,UAAUe,OAAO,eAGvBrB,MAAMC,UAAUC,QAAQC,KAAKwC,EAAW,SAAUC,GAChDA,EAAItC,UAAUc,IAAI,iBAKxBvB,eACAX","file":"scripts/contentscript.js","sourcesContent":["'use strict';\n\nvar feedSize = 50;\n\nvar loadNextPage = function loadNextPage() {\n  var button = document.querySelector('.news > form > button');\n  if (button) {\n    button.click();\n    return true;\n  }\n  return false;\n};\n\nvar countUpdate = function countUpdate() {\n  var count = document.getElementById('hideCount');\n  count.textContent = document.getElementsByClassName('ghff-hide').length;\n};\n\nvar feedCleaning = function feedCleaning() {\n  var lines = document.querySelectorAll('.news > .alert');\n  Array.prototype.forEach.call(lines, function (line) {\n    var classes = line.classList;\n    var repoLine = line.querySelectorAll('.title > a')[1].text;\n    var repo = repoLine;\n    var anchor = repoLine.indexOf('#');\n    if (anchor !== -1) {\n      repo = repoLine.slice(0, anchor);\n    }\n\n    chrome.runtime.sendMessage({ repo: repo }, function (response) {\n      if (line.parentNode) {\n        // TODO: refactor the following\n        if (classes.contains('watch_started')) {\n          if (response.star === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('fork')) {\n          if (response.fork === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('issues_opened')) {\n          if (response.issue_open === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('issues_comment')) {\n          if (response.issue_com === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('issues_closed')) {\n          if (response.issue_close === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('gollum')) {\n          if (response.wiki === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n        if (classes.contains('push')) {\n          if (response.commit === 'true') {\n            line.classList.add('ghff-hide');\n          } else {\n            line.classList.remove('ghff-hide');\n          }\n        }\n      }\n    });\n  });\n  countUpdate();\n};\n\nvar observer = new MutationObserver(function () {\n  feedCleaning();\n  if (document.querySelectorAll('.news > .alert:not(.ghff-hide)').length < feedSize) {\n    loadNextPage();\n  }\n});\n\nchrome.runtime.onMessage.addListener(function (request) {\n  if (request.update) {\n    feedCleaning();\n  }\n});\n\nobserver.observe(document.querySelector('.news'), { childList: true });\n\nvar hideCount = document.createElement('label');\nhideCount.classList.add('filter-label');\nhideCount.id = 'hideCount';\nhideCount.textContent = 0;\nvar insertTarget = document.querySelector('.news .alert');\ninsertTarget.parentElement.insertBefore(hideCount, insertTarget);\n\ndocument.getElementById('hideCount').addEventListener('click', function () {\n  var hiddenElt = document.getElementsByClassName('ghff-hide');\n  if (hiddenElt.length && hiddenElt[0].classList.contains('ghff-show')) {\n    Array.prototype.forEach.call(hiddenElt, function (elt) {\n      elt.classList.remove('ghff-show');\n    });\n  } else {\n    Array.prototype.forEach.call(hiddenElt, function (elt) {\n      elt.classList.add('ghff-show');\n    });\n  }\n});\n\nfeedCleaning();\nloadNextPage();"],"sourceRoot":"/source/"}