{"version":3,"sources":["scripts/contentscript.js"],"names":["feedSize","loadNextPage","button","document","querySelector","click","feedCleaning","lines","querySelectorAll","Array","prototype","forEach","call","line","classes","classList","repo","text","chrome","runtime","sendMessage","response","parentNode","removed","star","contains","removeChild","fork","add","remaining","length","observer","MutationObserver","observe","childList"],"mappings":"AAAA,YAEA,IAAIA,UAAW,GAEXC,aAAe,WACjB,GAAIC,GAASC,SAASC,cAAc,wBACpC,OAAIF,IACFA,EAAOG,SACA,IAEF,GAGLC,aAAe,WACjB,GAAIC,GAAQJ,SAASK,iBAAiB,6BACtCC,OAAMC,UAAUC,QAAQC,KAAKL,EAAO,SAAUM,GAC5C,GAAIC,GAAUD,EAAKE,UACfC,EAAOH,EAAKL,iBAAiB,cAAc,GAAGS,IAElDC,QAAOC,QAAQC,aAAcJ,KAAMA,GAAQ,SAAUK,GACnD,GAAIR,EAAKS,WAAY,CAEnB,GAAIC,IAAU,CACVF,GAASG,MAAQV,EAAQW,SAAS,mBACpCZ,EAAKS,WAAWI,YAAYb,GAC5BU,GAAU,GAGPA,IACCF,EAASM,MAAQb,EAAQW,SAAS,QACpCZ,EAAKS,WAAWI,YAAYb,GAE5BA,EAAKE,UAAUa,IAAI,cAO7B,IAAIC,GAAY1B,SAASK,iBAAiB,kBAAkBsB,MAC5D,OAAOD,IAGLE,SAAW,GAAIC,kBAAiB,WAC9B1B,eAAiBN,UACnBC,gBAIJ8B,UAASE,QAAQ9B,SAASC,cAAc,UAAY8B,WAAW,IAG/DjC","file":"scripts/contentscript.js","sourcesContent":["'use strict';\n\nvar feedSize = 30;\n\nvar loadNextPage = function loadNextPage() {\n  var button = document.querySelector('.news > form > button');\n  if (button) {\n    button.click();\n    return true;\n  }\n  return false;\n};\n\nvar feedCleaning = function feedCleaning() {\n  var lines = document.querySelectorAll('.news > .alert:not(.clean)'); // only clean new els\n  Array.prototype.forEach.call(lines, function (line) {\n    var classes = line.classList;\n    var repo = line.querySelectorAll('.title > a')[1].text;\n\n    chrome.runtime.sendMessage({ repo: repo }, function (response) {\n      if (line.parentNode) {\n        // ugly hack?\n        var removed = false;\n        if (response.star && classes.contains('watch_started')) {\n          line.parentNode.removeChild(line);\n          removed = true;\n        }\n\n        if (!removed) {\n          if (response.fork && classes.contains('fork')) {\n            line.parentNode.removeChild(line);\n          } else {\n            line.classList.add('clean'); // mark line as clean\n          }\n        }\n      }\n    });\n  });\n\n  var remaining = document.querySelectorAll('.news > .alert').length;\n  return remaining;\n};\n\nvar observer = new MutationObserver(function () {\n  if (feedCleaning() < feedSize) {\n    loadNextPage();\n  }\n});\n\nobserver.observe(document.querySelector('.news'), { childList: true });\n\n// Start !\nloadNextPage();"],"sourceRoot":"/source/"}